# http://www.maths.bath.ac.uk/~jjf23/mixchange/split.html

install.packages('gsheet')
library(gsheet)
splityield <- read.csv(text = 
                     gsheet2text('https://docs.google.com/spreadsheets/d/1THGClMt_bkP4lYIWqpI3S5mg0uRlGLrP48aVTTIvnX4/edit?usp=sharing',
                                 format ='csv'))
head(splityield)
summary(splityield)

## ANOVA:
fit <- aov(yield ~ irrigation*fertilizer + Error(block), data=splityield)
summary(lmod)
fit <- aov(yield ~ irrigation * density * fertilizer + 
                 Error(block/irrigation/density), splityield)
summary(fit)

## MIXED MODELS:
require(lme4)
fit <- lmer(yield ~ irrigation * fertilizer + (1|block),data=splityield)
print(summary(mmod),correlation=FALSE)
summary(fit); anova(fit)       
confint(fit)

